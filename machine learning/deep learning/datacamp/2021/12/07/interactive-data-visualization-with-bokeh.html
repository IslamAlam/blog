<h1 id="interactive-data-visualization-with-bokeh">Interactive Data Visualization with Bokeh</h1>

<h2 id="basic-plotting-with-bokeh">Basic plotting with Bokeh</h2>

<p>###
 Plotting with glyphs</p>

<p>####
 What are glyphs?</p>

<p>In Bokeh, visual properties of shapes are called glyphs.</p>

<p>Multiple glyphs can be drawn by setting glyph properties to ordered sequences of values.</p>

<p>####
 A simple scatter plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Import output_file and show from bokeh.io
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility</span><span class="p">,</span> <span class="n">female_literacy</span><span class="p">)</span>

<span class="c1"># Call the output_file() function and specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-9.png" alt="Desktop View" /></p>

<p>####
 A scatter plot with different shapes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">)</span>

<span class="c1"># Add an x glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-8.png" alt="Desktop View" /></p>

<p>####
 Customizing your scatter plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a blue circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Add a red circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate_colors.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-7.png" alt="Desktop View" /></p>

<p><a href="http://www.colors.commutercreative.com/grid/">CSS color names</a></p>

<p>###
 Additional glyphs</p>

<p>####
 Lines</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type="datetime": p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">"datetime"</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x axis and price along the y axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="n">price</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-6.png" alt="Desktop View" /></p>

<p>####
 Lines and markers</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type='datetime': p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">'datetime'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x-axis and price along the y-axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>

<span class="c1"># With date on the x-axis and price on the y-axis, add a white circle glyph of size 4
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-6.png" alt="Desktop View" /></p>

<p>####
 Patches</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a list of az_lons, co_lons, nm_lons and ut_lons: x
</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lons</span><span class="p">,</span> <span class="n">co_lons</span><span class="p">,</span> <span class="n">nm_lons</span><span class="p">,</span> <span class="n">ut_lons</span><span class="p">]</span>

<span class="c1"># Create a list of az_lats, co_lats, nm_lats and ut_lats: y
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lats</span><span class="p">,</span> <span class="n">co_lats</span><span class="p">,</span> <span class="n">nm_lats</span><span class="p">,</span> <span class="n">ut_lats</span><span class="p">]</span>

<span class="c1"># Add patches to figure p with line_color=white for x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">patches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">line_color</span> <span class="o">=</span> <span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'four_corners.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-5.png" alt="Desktop View" /></p>

<p>###
 Data formats</p>

<p>####
 Plotting data from NumPy arrays</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import numpy as np
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Create array using np.linspace: x
</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create array using np.cos: y
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Add circles at x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'numpy.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-5.png" alt="Desktop View" /></p>

<p>####
 Plotting data from Pandas DataFrames</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import pandas as pd
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read in the CSV file: df
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'auto.csv'</span><span class="p">)</span>

<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'HP'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'MPG'</span><span class="p">)</span>

<span class="c1"># Plot mpg vs hp by color
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'hp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">'mpg'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'color'</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'auto-df.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-5.png" alt="Desktop View" /></p>

<p>####
 The Bokeh ColumnDataSource</p>

<p>The
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 is a table-like data object that maps string column names to sequences (columns) of data. It is the central and most common data structure in Bokeh.</p>

<p>All columns in a
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 must have the same length.press</p>

<p>####
 The Bokeh ColumnDataSource (continued)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
df.head()
               Name Country   Medal  Time  Year        color
0        Usain Bolt     JAM    GOLD  9.63  2012    goldenrod
1       Yohan Blake     JAM  SILVER  9.75  2012       silver
2     Justin Gatlin     USA  BRONZE  9.79  2012  saddlebrown
3        Usain Bolt     JAM    GOLD  9.69  2008    goldenrod
4  Richard Thompson     TRI  SILVER  9.89  2008       silver

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the ColumnDataSource class from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Create a ColumnDataSource from df: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'color'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'sprint.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-4.png" alt="Desktop View" /></p>

<p>####
 Selection and non-selection glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a figure with the "box_select" tool: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Year'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Time'</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s">'box_select'</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p with the selected and non-selected properties
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">selection_color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">,</span> <span class="n">nonselection_alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'selection_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-3.png" alt="Desktop View" /></p>

<p>####
 Hover glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># import the HoverTool
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Add circle glyphs to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
         <span class="n">fill_color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">hover_fill_color</span><span class="o">=</span><span class="s">'firebrick'</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">hover_line_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'vline'</span><span class="p">)</span>

<span class="c1"># Add the hover tool to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-3.png" alt="Desktop View" /></p>

<p>####
 Colormapping</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#Import CategoricalColorMapper from bokeh.models
from bokeh.models import CategoricalColorMapper

# Convert df to a ColumnDataSource: source
source = ColumnDataSource(df)

# Make a CategoricalColorMapper object: color_mapper
color_mapper = CategoricalColorMapper(factors=['Europe', 'Asia', 'US'],
                                      palette=['red', 'green', 'blue'])

# Add a circle glyph to the figure p
p.circle('weight', 'mpg', source=source,
            color=dict(field='origin', transform=color_mapper),
            legend='origin')

# Specify the name of the output file and show the result
output_file('colormap.html')
show(p)


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-3.png" alt="Desktop View" /></p>

<h2 id="layouts-interactions-and-annotations">Layouts, Interactions, and Annotations</h2>

<p>###
 Introduction to layouts</p>

<p>####
 Creating rows of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Put p1 and p2 into a horizontal row: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_row.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-2.png" alt="Desktop View" /></p>

<p>####
 Creating columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column from the bokeh.layouts module
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>

<span class="c1"># Create a blank figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a new blank figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Put plots p1 and p2 in a column: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_column.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-2.png" alt="Desktop View" /></p>

<p>####
 Nesting rows and columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column and row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span>

<span class="c1"># Make a column layout that will be used as the second row: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="n">column</span><span class="p">([</span><span class="n">mpg_hp</span><span class="p">,</span> <span class="n">mpg_weight</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Make a row layout that includes the above column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">([</span><span class="n">avg_mpg</span><span class="p">,</span> <span class="n">row2</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'layout_custom.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-1.png" alt="Desktop View" /></p>

<p>###
 Advanced layouts</p>

<p>####
 Creating gridded layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import gridplot from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>

<span class="c1"># Create a list containing plots p1 and p2: row1
</span><span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>

<span class="c1"># Create a list containing plots p3 and p4: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">]</span>

<span class="c1"># Create a gridplot using row1 and row2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'grid.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-1.png" alt="Desktop View" /></p>

<p>####
 Starting tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Panel from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="c1"># Create tab1 from plot p1: tab1
</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Create tab2 from plot p2: tab2
</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Create tab3 from plot p3: tab3
</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Asia'</span><span class="p">)</span>

<span class="c1"># Create tab4 from plot p4: tab4
</span><span class="n">tab4</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Europe'</span><span class="p">)</span>


</code></pre></div></div>

<p>####
 Displaying tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Tabs from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Tabs</span>

<span class="c1"># Create a Tabs layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span><span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span><span class="p">,</span> <span class="n">tab3</span><span class="p">,</span> <span class="n">tab4</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'tabs.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-1.png" alt="Desktop View" /></p>

<p>###
 Linking plots together</p>

<p>####
 Linked axes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Link the x_range of p2 to p1: p2.x_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p2 to p1: p2.y_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Link the x_range of p3 to p1: p3.x_range
</span><span class="n">p3</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p4 to p1: p4.y_range
</span><span class="n">p4</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_range.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-10.png" alt="Desktop View" /></p>

<p>####
 Linked brushing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    Country  Continent female literacy fertility   population
0      Chine       ASI            90.5     1.769  1324.655000
1       Inde       ASI            50.8     2.682  1139.964932
2        USA       NAM              99     2.077   304.060000
3  Indonésie       ASI            88.8     2.132   227.345082
4     Brésil       LAT            90.2     1.827   191.971506

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female literacy (% population)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'population (millions)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Create row layout of figures p1 and p2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_brush.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-9.png" alt="Desktop View" /></p>

<p>###
 Annotations and guides</p>

<p>####
 How to create legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Add the first circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">latin_america</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Add the second circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">africa</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-8.png" alt="Desktop View" /></p>

<p>####
 Positioning and styling legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Assign the legend to the bottom left: p.legend.location
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'bottom_left'</span>

<span class="c1"># Fill the legend background with the color 'lightgray': p.legend.background_fill_color
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s">'lightgray'</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-7.png" alt="Desktop View" /></p>

<p>####
 Adding a hover tooltip</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool object: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span><span class="s">'@Country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool object to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-7.png" alt="Desktop View" /></p>

<h2 id="building-interactive-apps-with-bokeh">Building interactive apps with Bokeh</h2>

<p>###
 Introducing the Bokeh Server</p>

<p>####
 Understanding Bokeh apps</p>

<p>The main purpose of the Bokeh server is to synchronize python objects with web applications in a browser, so that rich, interactive data applications can be connected to powerful PyData libraries such as NumPy, SciPy, Pandas, and scikit-learn.</p>

<p>The Bokeh server can automatically keep in sync any property of any Bokeh object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
bokeh serve myapp.py

</code></pre></div></div>

<p>####</p>

<p>Using the current document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Add the plot to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-11.png" alt="Desktop View" /></p>

<p>####
 Add a single slider</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform the necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create a slider: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'my slider'</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a widgetbox layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-10.png" alt="Desktop View" /></p>

<p>####
 Multiple sliders in one document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create first slider: slider1
</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider1'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create second slider: slider2
</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider2'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Add slider1 and slider2 to a widgetbox
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider1</span><span class="p">,</span> <span class="n">slider2</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-9.png" alt="Desktop View" /></p>

<p>###
 Connecting sliders to plots</p>

<p>####
 Adding callbacks to sliders</p>

<p>Callbacks are functions that a user can define, like
 <code class="language-plaintext highlighter-rouge">def callback(attr, old, new)</code>
 , that can be called automatically when some property of a Bokeh object (e.g., the
 <code class="language-plaintext highlighter-rouge">value</code>
 of a
 <code class="language-plaintext highlighter-rouge">Slider</code>
 ) changes.</p>

<p>For the
 <code class="language-plaintext highlighter-rouge">value</code>
 property of
 <code class="language-plaintext highlighter-rouge">Slider</code>
 objects, callbacks are added by passing a callback function to the
 <code class="language-plaintext highlighter-rouge">on_change</code>
 method.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
myslider.on_change('value', callback)

</code></pre></div></div>

<p>####
 How to combine Bokeh models into layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-8.png" alt="Desktop View" /></p>

<p>####
 Learn about widget callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>

    <span class="c1"># Read the current value of the slider: scale
</span>    <span class="n">scale</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Compute the updated y using np.sin(scale/x): new_y
</span>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">scale</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Update source with the new data values
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">new_y</span><span class="p">}</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-8.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-6.png" alt="Desktop View" /></p>

<p>###
 Updating plots from dropdowns</p>

<p>####
 Updating data sources from dropdown callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Select</span>

<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
<span class="p">})</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add circles to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Define a callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If the new Selection is 'female_literacy', update 'y' to female_literacy
</span>    <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="s">'female_literacy'</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
        <span class="p">}</span>
    <span class="c1"># Else, update 'y' to population
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">population</span>
        <span class="p">}</span>

<span class="c1"># Create a dropdown Select widget: select
</span><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"distribution"</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'female_literacy'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'female_literacy'</span><span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of select
</span><span class="n">select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">select</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-6.png" alt="Desktop View" /></p>

<p>####
 Synchronize two dropdowns</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create two dropdown Select widgets: select1, select2
</span><span class="n">select1</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'First'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'A'</span><span class="p">)</span>
<span class="n">select2</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Second'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'1'</span><span class="p">)</span>

<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If select1 is 'A'
</span>    <span class="k">if</span> <span class="n">select1</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">'A'</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['1', '2', '3']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '1'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['100', '200', '300']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'100'</span><span class="p">,</span> <span class="s">'200'</span><span class="p">,</span> <span class="s">'300'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '100'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'100'</span>

<span class="c1"># Attach the callback to the 'value' property of select1
</span><span class="n">select1</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">select1</span><span class="p">,</span> <span class="n">select2</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-5.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-6.png" alt="Desktop View" /></p>

<p>###
 Buttons</p>

<p>####
 Button widgets</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a Button with label 'Update Data'
</span><span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Update Data'</span><span class="p">)</span>

<span class="c1"># Define an update callback with no arguments: update
</span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="c1"># Compute new y values: y
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># Update the ColumnDataSource data dictionary
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">'y'</span><span class="p">:</span><span class="n">y</span><span class="p">}</span>

<span class="c1"># Add the update callback to the button
</span><span class="n">button</span><span class="p">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-4.png" alt="Desktop View" /></p>

<p>####
 Button styles</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import CheckboxGroup, RadioGroup, Toggle from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span><span class="p">,</span> <span class="n">RadioGroup</span><span class="p">,</span> <span class="n">Toggle</span>

<span class="c1"># Add a Toggle: toggle
</span><span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">button_type</span> <span class="o">=</span> <span class="s">'success'</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">'Toggle button'</span><span class="p">)</span>

<span class="c1"># Add a CheckboxGroup: checkbox
</span><span class="n">checkbox</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add a RadioGroup: radio
</span><span class="n">radio</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add widgetbox(toggle, checkbox, radio) to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">radio</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-4.png" alt="Desktop View" /></p>

<h2 id="putting-it-all-together-a-case-study">Putting It All Together! A Case Study</h2>

<p>###
 Time to put it all together!</p>

<p>####
 Introducing the project dataset</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
data.info()
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10111 entries, 1964 to 2006
Data columns (total 7 columns):
Country            10111 non-null object
fertility          10100 non-null float64
life               10111 non-null float64
population         10108 non-null float64
child_mortality    9210 non-null float64
gdp                9000 non-null float64
region             10111 non-null object
dtypes: float64(5), object(2)
memory usage: 631.9+ KB


data.head()
          Country  fertility    life  population  child_mortality     gdp  \
Year
1964  Afghanistan      7.671  33.639  10474903.0            339.7  1182.0
1965  Afghanistan      7.671  34.152  10697983.0            334.1  1182.0
1966  Afghanistan      7.671  34.662  10927724.0            328.7  1168.0
1967  Afghanistan      7.671  35.170  11163656.0            323.3  1173.0
1968  Afghanistan      7.671  35.674  11411022.0            318.1  1187.0

          region
Year
1964  South Asia
1965  South Asia
1966  South Asia
1967  South Asia
1968  South Asia

</code></pre></div></div>

<p>####
 Some exploratory plots of the data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'1970'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Life Expectancy (years)'</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Output the file and show the figure
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'gapminder.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-4.png" alt="Desktop View" /></p>

<p>###
 Starting the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-3.png" alt="Desktop View" /></p>

<p>####
 Beginning with just a plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
    <span class="s">'pop'</span>      <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">'region'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Save the minimum and maximum values of the fertility column: xmin, xmax
</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">)</span>

<span class="c1"># Save the minimum and maximum values of the life expectancy column: ymin, ymax
</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">)</span>

<span class="c1"># Create the figure: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Gapminder Data for 1970'</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
              <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

<span class="c1"># Add circle glyphs to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Set the x-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span><span class="s">'Fertility (children per woman)'</span>

<span class="c1"># Set the y-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s">'Life Expectancy (years)'</span>

<span class="c1"># Add the plot to the current document and add a title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>



</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-3.png" alt="Desktop View" /></p>

<p>####
 Enhancing the plot with some shading</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Make a list of the unique values from the region column: regions_list
</span><span class="n">regions_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">region</span><span class="p">.</span><span class="n">unique</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Import CategoricalColorMapper from bokeh.models and the Spectral6 palette from bokeh.palettes
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CategoricalColorMapper</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>

<span class="c1"># Make a color mapper: color_mapper
</span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">CategoricalColorMapper</span><span class="p">(</span><span class="n">factors</span><span class="o">=</span><span class="n">regions_list</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">Spectral6</span><span class="p">)</span>

<span class="c1"># Add the color mapper to the circle glyph
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">'region'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">color_mapper</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="s">'region'</span><span class="p">)</span>

<span class="c1"># Set the legend.location attribute of the plot to 'top_right'
</span><span class="n">plot</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'top_right'</span>

<span class="c1"># Add the plot to the current document and add the title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-2.png" alt="Desktop View" /></p>

<p>####
 Adding a slider to vary the year</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Set the yr name to slider.value and new_data to source.data
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>


<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-2.png" alt="Desktop View" /></p>

<p>###
 Customizing based on user input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Assign the value of the slider: yr
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to: source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Add title to figure: plot.title.text
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-2.png" alt="Desktop View" /></p>

<p>###
 Adding more interactivity to the app</p>

<p>####
 Adding a hover tool</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture17-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Create layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add layout to current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture19-1.png" alt="Desktop View" /></p>

<p>####
 Adding dropdowns to the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture18-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Read the current value off the slider and 2 dropdowns: yr, x, y
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x_select</span><span class="p">.</span><span class="n">value</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y_select</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Label axes of plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">x</span><span class="p">],</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">y</span><span class="p">],</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Set the range of all axes
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

    <span class="c1"># Add title to plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Create a dropdown slider widget: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the x data: x_select
</span><span class="n">x_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'x-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of x_select
</span><span class="n">x_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the y data: y_select
</span><span class="n">y_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'life'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'y-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of y_select
</span><span class="n">y_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">x_select</span><span class="p">,</span> <span class="n">y_select</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="basic-plotting-with-bokeh-1">Basic plotting with Bokeh</h2>

<p>###
 Plotting with glyphs</p>

<p>####
 What are glyphs?</p>

<p>In Bokeh, visual properties of shapes are called glyphs.</p>

<p>Multiple glyphs can be drawn by setting glyph properties to ordered sequences of values.</p>

<p>####
 A simple scatter plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Import output_file and show from bokeh.io
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility</span><span class="p">,</span> <span class="n">female_literacy</span><span class="p">)</span>

<span class="c1"># Call the output_file() function and specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-9.png" alt="Desktop View" /></p>

<p>####
 A scatter plot with different shapes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">)</span>

<span class="c1"># Add an x glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-8.png" alt="Desktop View" /></p>

<p>####
 Customizing your scatter plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a blue circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Add a red circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate_colors.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-7.png" alt="Desktop View" /></p>

<p><a href="http://www.colors.commutercreative.com/grid/">CSS color names</a></p>

<p>###
 Additional glyphs</p>

<p>####
 Lines</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type="datetime": p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">"datetime"</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x axis and price along the y axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="n">price</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-6.png" alt="Desktop View" /></p>

<p>####
 Lines and markers</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type='datetime': p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">'datetime'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x-axis and price along the y-axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>

<span class="c1"># With date on the x-axis and price on the y-axis, add a white circle glyph of size 4
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-6.png" alt="Desktop View" /></p>

<p>####
 Patches</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a list of az_lons, co_lons, nm_lons and ut_lons: x
</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lons</span><span class="p">,</span> <span class="n">co_lons</span><span class="p">,</span> <span class="n">nm_lons</span><span class="p">,</span> <span class="n">ut_lons</span><span class="p">]</span>

<span class="c1"># Create a list of az_lats, co_lats, nm_lats and ut_lats: y
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lats</span><span class="p">,</span> <span class="n">co_lats</span><span class="p">,</span> <span class="n">nm_lats</span><span class="p">,</span> <span class="n">ut_lats</span><span class="p">]</span>

<span class="c1"># Add patches to figure p with line_color=white for x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">patches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">line_color</span> <span class="o">=</span> <span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'four_corners.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-5.png" alt="Desktop View" /></p>

<p>###
 Data formats</p>

<p>####
 Plotting data from NumPy arrays</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import numpy as np
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Create array using np.linspace: x
</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create array using np.cos: y
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Add circles at x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'numpy.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-5.png" alt="Desktop View" /></p>

<p>####
 Plotting data from Pandas DataFrames</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import pandas as pd
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read in the CSV file: df
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'auto.csv'</span><span class="p">)</span>

<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'HP'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'MPG'</span><span class="p">)</span>

<span class="c1"># Plot mpg vs hp by color
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'hp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">'mpg'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'color'</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'auto-df.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-5.png" alt="Desktop View" /></p>

<p>####
 The Bokeh ColumnDataSource</p>

<p>The
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 is a table-like data object that maps string column names to sequences (columns) of data. It is the central and most common data structure in Bokeh.</p>

<p>All columns in a
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 must have the same length.press</p>

<p>####
 The Bokeh ColumnDataSource (continued)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
df.head()
               Name Country   Medal  Time  Year        color
0        Usain Bolt     JAM    GOLD  9.63  2012    goldenrod
1       Yohan Blake     JAM  SILVER  9.75  2012       silver
2     Justin Gatlin     USA  BRONZE  9.79  2012  saddlebrown
3        Usain Bolt     JAM    GOLD  9.69  2008    goldenrod
4  Richard Thompson     TRI  SILVER  9.89  2008       silver

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the ColumnDataSource class from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Create a ColumnDataSource from df: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'color'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'sprint.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-4.png" alt="Desktop View" /></p>

<p>####
 Selection and non-selection glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a figure with the "box_select" tool: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Year'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Time'</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s">'box_select'</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p with the selected and non-selected properties
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">selection_color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">,</span> <span class="n">nonselection_alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'selection_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-3.png" alt="Desktop View" /></p>

<p>####
 Hover glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># import the HoverTool
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Add circle glyphs to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
         <span class="n">fill_color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">hover_fill_color</span><span class="o">=</span><span class="s">'firebrick'</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">hover_line_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'vline'</span><span class="p">)</span>

<span class="c1"># Add the hover tool to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-3.png" alt="Desktop View" /></p>

<p>####
 Colormapping</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#Import CategoricalColorMapper from bokeh.models
from bokeh.models import CategoricalColorMapper

# Convert df to a ColumnDataSource: source
source = ColumnDataSource(df)

# Make a CategoricalColorMapper object: color_mapper
color_mapper = CategoricalColorMapper(factors=['Europe', 'Asia', 'US'],
                                      palette=['red', 'green', 'blue'])

# Add a circle glyph to the figure p
p.circle('weight', 'mpg', source=source,
            color=dict(field='origin', transform=color_mapper),
            legend='origin')

# Specify the name of the output file and show the result
output_file('colormap.html')
show(p)


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-3.png" alt="Desktop View" /></p>

<h2 id="layouts-interactions-and-annotations-1">Layouts, Interactions, and Annotations</h2>

<p>###
 Introduction to layouts</p>

<p>####
 Creating rows of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Put p1 and p2 into a horizontal row: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_row.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-2.png" alt="Desktop View" /></p>

<p>####
 Creating columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column from the bokeh.layouts module
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>

<span class="c1"># Create a blank figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a new blank figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Put plots p1 and p2 in a column: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_column.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-2.png" alt="Desktop View" /></p>

<p>####
 Nesting rows and columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column and row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span>

<span class="c1"># Make a column layout that will be used as the second row: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="n">column</span><span class="p">([</span><span class="n">mpg_hp</span><span class="p">,</span> <span class="n">mpg_weight</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Make a row layout that includes the above column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">([</span><span class="n">avg_mpg</span><span class="p">,</span> <span class="n">row2</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'layout_custom.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-1.png" alt="Desktop View" /></p>

<p>###
 Advanced layouts</p>

<p>####
 Creating gridded layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import gridplot from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>

<span class="c1"># Create a list containing plots p1 and p2: row1
</span><span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>

<span class="c1"># Create a list containing plots p3 and p4: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">]</span>

<span class="c1"># Create a gridplot using row1 and row2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'grid.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-1.png" alt="Desktop View" /></p>

<p>####
 Starting tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Panel from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="c1"># Create tab1 from plot p1: tab1
</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Create tab2 from plot p2: tab2
</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Create tab3 from plot p3: tab3
</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Asia'</span><span class="p">)</span>

<span class="c1"># Create tab4 from plot p4: tab4
</span><span class="n">tab4</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Europe'</span><span class="p">)</span>


</code></pre></div></div>

<p>####
 Displaying tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Tabs from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Tabs</span>

<span class="c1"># Create a Tabs layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span><span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span><span class="p">,</span> <span class="n">tab3</span><span class="p">,</span> <span class="n">tab4</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'tabs.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-1.png" alt="Desktop View" /></p>

<p>###
 Linking plots together</p>

<p>####
 Linked axes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Link the x_range of p2 to p1: p2.x_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p2 to p1: p2.y_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Link the x_range of p3 to p1: p3.x_range
</span><span class="n">p3</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p4 to p1: p4.y_range
</span><span class="n">p4</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_range.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-10.png" alt="Desktop View" /></p>

<p>####
 Linked brushing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    Country  Continent female literacy fertility   population
0      Chine       ASI            90.5     1.769  1324.655000
1       Inde       ASI            50.8     2.682  1139.964932
2        USA       NAM              99     2.077   304.060000
3  Indonésie       ASI            88.8     2.132   227.345082
4     Brésil       LAT            90.2     1.827   191.971506

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female literacy (% population)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'population (millions)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Create row layout of figures p1 and p2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_brush.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-9.png" alt="Desktop View" /></p>

<p>###
 Annotations and guides</p>

<p>####
 How to create legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Add the first circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">latin_america</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Add the second circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">africa</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-8.png" alt="Desktop View" /></p>

<p>####
 Positioning and styling legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Assign the legend to the bottom left: p.legend.location
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'bottom_left'</span>

<span class="c1"># Fill the legend background with the color 'lightgray': p.legend.background_fill_color
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s">'lightgray'</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-7.png" alt="Desktop View" /></p>

<p>####
 Adding a hover tooltip</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool object: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span><span class="s">'@Country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool object to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-7.png" alt="Desktop View" /></p>

<h2 id="building-interactive-apps-with-bokeh-1">Building interactive apps with Bokeh</h2>

<p>###
 Introducing the Bokeh Server</p>

<p>####
 Understanding Bokeh apps</p>

<p>The main purpose of the Bokeh server is to synchronize python objects with web applications in a browser, so that rich, interactive data applications can be connected to powerful PyData libraries such as NumPy, SciPy, Pandas, and scikit-learn.</p>

<p>The Bokeh server can automatically keep in sync any property of any Bokeh object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
bokeh serve myapp.py

</code></pre></div></div>

<p>####</p>

<p>Using the current document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Add the plot to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-11.png" alt="Desktop View" /></p>

<p>####
 Add a single slider</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform the necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create a slider: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'my slider'</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a widgetbox layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-10.png" alt="Desktop View" /></p>

<p>####
 Multiple sliders in one document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create first slider: slider1
</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider1'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create second slider: slider2
</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider2'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Add slider1 and slider2 to a widgetbox
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider1</span><span class="p">,</span> <span class="n">slider2</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-9.png" alt="Desktop View" /></p>

<p>###
 Connecting sliders to plots</p>

<p>####
 Adding callbacks to sliders</p>

<p>Callbacks are functions that a user can define, like
 <code class="language-plaintext highlighter-rouge">def callback(attr, old, new)</code>
 , that can be called automatically when some property of a Bokeh object (e.g., the
 <code class="language-plaintext highlighter-rouge">value</code>
 of a
 <code class="language-plaintext highlighter-rouge">Slider</code>
 ) changes.</p>

<p>For the
 <code class="language-plaintext highlighter-rouge">value</code>
 property of
 <code class="language-plaintext highlighter-rouge">Slider</code>
 objects, callbacks are added by passing a callback function to the
 <code class="language-plaintext highlighter-rouge">on_change</code>
 method.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
myslider.on_change('value', callback)

</code></pre></div></div>

<p>####
 How to combine Bokeh models into layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-8.png" alt="Desktop View" /></p>

<p>####
 Learn about widget callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>

    <span class="c1"># Read the current value of the slider: scale
</span>    <span class="n">scale</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Compute the updated y using np.sin(scale/x): new_y
</span>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">scale</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Update source with the new data values
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">new_y</span><span class="p">}</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-8.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-6.png" alt="Desktop View" /></p>

<p>###
 Updating plots from dropdowns</p>

<p>####
 Updating data sources from dropdown callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Select</span>

<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
<span class="p">})</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add circles to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Define a callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If the new Selection is 'female_literacy', update 'y' to female_literacy
</span>    <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="s">'female_literacy'</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
        <span class="p">}</span>
    <span class="c1"># Else, update 'y' to population
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">population</span>
        <span class="p">}</span>

<span class="c1"># Create a dropdown Select widget: select
</span><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"distribution"</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'female_literacy'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'female_literacy'</span><span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of select
</span><span class="n">select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">select</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-6.png" alt="Desktop View" /></p>

<p>####
 Synchronize two dropdowns</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create two dropdown Select widgets: select1, select2
</span><span class="n">select1</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'First'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'A'</span><span class="p">)</span>
<span class="n">select2</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Second'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'1'</span><span class="p">)</span>

<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If select1 is 'A'
</span>    <span class="k">if</span> <span class="n">select1</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">'A'</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['1', '2', '3']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '1'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['100', '200', '300']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'100'</span><span class="p">,</span> <span class="s">'200'</span><span class="p">,</span> <span class="s">'300'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '100'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'100'</span>

<span class="c1"># Attach the callback to the 'value' property of select1
</span><span class="n">select1</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">select1</span><span class="p">,</span> <span class="n">select2</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-5.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-6.png" alt="Desktop View" /></p>

<p>###
 Buttons</p>

<p>####
 Button widgets</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a Button with label 'Update Data'
</span><span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Update Data'</span><span class="p">)</span>

<span class="c1"># Define an update callback with no arguments: update
</span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="c1"># Compute new y values: y
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># Update the ColumnDataSource data dictionary
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">'y'</span><span class="p">:</span><span class="n">y</span><span class="p">}</span>

<span class="c1"># Add the update callback to the button
</span><span class="n">button</span><span class="p">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-4.png" alt="Desktop View" /></p>

<p>####
 Button styles</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import CheckboxGroup, RadioGroup, Toggle from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span><span class="p">,</span> <span class="n">RadioGroup</span><span class="p">,</span> <span class="n">Toggle</span>

<span class="c1"># Add a Toggle: toggle
</span><span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">button_type</span> <span class="o">=</span> <span class="s">'success'</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">'Toggle button'</span><span class="p">)</span>

<span class="c1"># Add a CheckboxGroup: checkbox
</span><span class="n">checkbox</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add a RadioGroup: radio
</span><span class="n">radio</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add widgetbox(toggle, checkbox, radio) to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">radio</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-4.png" alt="Desktop View" /></p>

<h2 id="putting-it-all-together-a-case-study-1">Putting It All Together! A Case Study</h2>

<p>###
 Time to put it all together!</p>

<p>####
 Introducing the project dataset</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
data.info()
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10111 entries, 1964 to 2006
Data columns (total 7 columns):
Country            10111 non-null object
fertility          10100 non-null float64
life               10111 non-null float64
population         10108 non-null float64
child_mortality    9210 non-null float64
gdp                9000 non-null float64
region             10111 non-null object
dtypes: float64(5), object(2)
memory usage: 631.9+ KB


data.head()
          Country  fertility    life  population  child_mortality     gdp  \
Year
1964  Afghanistan      7.671  33.639  10474903.0            339.7  1182.0
1965  Afghanistan      7.671  34.152  10697983.0            334.1  1182.0
1966  Afghanistan      7.671  34.662  10927724.0            328.7  1168.0
1967  Afghanistan      7.671  35.170  11163656.0            323.3  1173.0
1968  Afghanistan      7.671  35.674  11411022.0            318.1  1187.0

          region
Year
1964  South Asia
1965  South Asia
1966  South Asia
1967  South Asia
1968  South Asia

</code></pre></div></div>

<p>####
 Some exploratory plots of the data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'1970'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Life Expectancy (years)'</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Output the file and show the figure
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'gapminder.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-4.png" alt="Desktop View" /></p>

<p>###
 Starting the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-3.png" alt="Desktop View" /></p>

<p>####
 Beginning with just a plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
    <span class="s">'pop'</span>      <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">'region'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Save the minimum and maximum values of the fertility column: xmin, xmax
</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">)</span>

<span class="c1"># Save the minimum and maximum values of the life expectancy column: ymin, ymax
</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">)</span>

<span class="c1"># Create the figure: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Gapminder Data for 1970'</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
              <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

<span class="c1"># Add circle glyphs to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Set the x-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span><span class="s">'Fertility (children per woman)'</span>

<span class="c1"># Set the y-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s">'Life Expectancy (years)'</span>

<span class="c1"># Add the plot to the current document and add a title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>



</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-3.png" alt="Desktop View" /></p>

<p>####
 Enhancing the plot with some shading</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Make a list of the unique values from the region column: regions_list
</span><span class="n">regions_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">region</span><span class="p">.</span><span class="n">unique</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Import CategoricalColorMapper from bokeh.models and the Spectral6 palette from bokeh.palettes
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CategoricalColorMapper</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>

<span class="c1"># Make a color mapper: color_mapper
</span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">CategoricalColorMapper</span><span class="p">(</span><span class="n">factors</span><span class="o">=</span><span class="n">regions_list</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">Spectral6</span><span class="p">)</span>

<span class="c1"># Add the color mapper to the circle glyph
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">'region'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">color_mapper</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="s">'region'</span><span class="p">)</span>

<span class="c1"># Set the legend.location attribute of the plot to 'top_right'
</span><span class="n">plot</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'top_right'</span>

<span class="c1"># Add the plot to the current document and add the title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-2.png" alt="Desktop View" /></p>

<p>####
 Adding a slider to vary the year</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Set the yr name to slider.value and new_data to source.data
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>


<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-2.png" alt="Desktop View" /></p>

<p>###
 Customizing based on user input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Assign the value of the slider: yr
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to: source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Add title to figure: plot.title.text
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-2.png" alt="Desktop View" /></p>

<p>###
 Adding more interactivity to the app</p>

<p>####
 Adding a hover tool</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture17-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Create layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add layout to current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture19-1.png" alt="Desktop View" /></p>

<p>####
 Adding dropdowns to the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture18-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Read the current value off the slider and 2 dropdowns: yr, x, y
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x_select</span><span class="p">.</span><span class="n">value</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y_select</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Label axes of plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">x</span><span class="p">],</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">y</span><span class="p">],</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Set the range of all axes
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

    <span class="c1"># Add title to plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Create a dropdown slider widget: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the x data: x_select
</span><span class="n">x_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'x-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of x_select
</span><span class="n">x_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the y data: y_select
</span><span class="n">y_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'life'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'y-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of y_select
</span><span class="n">y_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">x_select</span><span class="p">,</span> <span class="n">y_select</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="basic-plotting-with-bokeh-2">Basic plotting with Bokeh</h2>

<p>###
 Plotting with glyphs</p>

<p>####
 What are glyphs?</p>

<p>In Bokeh, visual properties of shapes are called glyphs.</p>

<p>Multiple glyphs can be drawn by setting glyph properties to ordered sequences of values.</p>

<p>####
 A simple scatter plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Import output_file and show from bokeh.io
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility</span><span class="p">,</span> <span class="n">female_literacy</span><span class="p">)</span>

<span class="c1"># Call the output_file() function and specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-9.png" alt="Desktop View" /></p>

<p>####
 A scatter plot with different shapes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">)</span>

<span class="c1"># Add an x glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-8.png" alt="Desktop View" /></p>

<p>####
 Customizing your scatter plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a blue circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Add a red circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate_colors.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-7.png" alt="Desktop View" /></p>

<p><a href="http://www.colors.commutercreative.com/grid/">CSS color names</a></p>

<p>###
 Additional glyphs</p>

<p>####
 Lines</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type="datetime": p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">"datetime"</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x axis and price along the y axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="n">price</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-6.png" alt="Desktop View" /></p>

<p>####
 Lines and markers</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type='datetime': p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">'datetime'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x-axis and price along the y-axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>

<span class="c1"># With date on the x-axis and price on the y-axis, add a white circle glyph of size 4
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-6.png" alt="Desktop View" /></p>

<p>####
 Patches</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a list of az_lons, co_lons, nm_lons and ut_lons: x
</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lons</span><span class="p">,</span> <span class="n">co_lons</span><span class="p">,</span> <span class="n">nm_lons</span><span class="p">,</span> <span class="n">ut_lons</span><span class="p">]</span>

<span class="c1"># Create a list of az_lats, co_lats, nm_lats and ut_lats: y
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lats</span><span class="p">,</span> <span class="n">co_lats</span><span class="p">,</span> <span class="n">nm_lats</span><span class="p">,</span> <span class="n">ut_lats</span><span class="p">]</span>

<span class="c1"># Add patches to figure p with line_color=white for x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">patches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">line_color</span> <span class="o">=</span> <span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'four_corners.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-5.png" alt="Desktop View" /></p>

<p>###
 Data formats</p>

<p>####
 Plotting data from NumPy arrays</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import numpy as np
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Create array using np.linspace: x
</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create array using np.cos: y
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Add circles at x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'numpy.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-5.png" alt="Desktop View" /></p>

<p>####
 Plotting data from Pandas DataFrames</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import pandas as pd
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read in the CSV file: df
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'auto.csv'</span><span class="p">)</span>

<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'HP'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'MPG'</span><span class="p">)</span>

<span class="c1"># Plot mpg vs hp by color
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'hp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">'mpg'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'color'</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'auto-df.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-5.png" alt="Desktop View" /></p>

<p>####
 The Bokeh ColumnDataSource</p>

<p>The
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 is a table-like data object that maps string column names to sequences (columns) of data. It is the central and most common data structure in Bokeh.</p>

<p>All columns in a
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 must have the same length.press</p>

<p>####
 The Bokeh ColumnDataSource (continued)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
df.head()
               Name Country   Medal  Time  Year        color
0        Usain Bolt     JAM    GOLD  9.63  2012    goldenrod
1       Yohan Blake     JAM  SILVER  9.75  2012       silver
2     Justin Gatlin     USA  BRONZE  9.79  2012  saddlebrown
3        Usain Bolt     JAM    GOLD  9.69  2008    goldenrod
4  Richard Thompson     TRI  SILVER  9.89  2008       silver

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the ColumnDataSource class from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Create a ColumnDataSource from df: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'color'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'sprint.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-4.png" alt="Desktop View" /></p>

<p>####
 Selection and non-selection glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a figure with the "box_select" tool: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Year'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Time'</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s">'box_select'</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p with the selected and non-selected properties
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">selection_color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">,</span> <span class="n">nonselection_alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'selection_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-3.png" alt="Desktop View" /></p>

<p>####
 Hover glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># import the HoverTool
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Add circle glyphs to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
         <span class="n">fill_color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">hover_fill_color</span><span class="o">=</span><span class="s">'firebrick'</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">hover_line_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'vline'</span><span class="p">)</span>

<span class="c1"># Add the hover tool to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-3.png" alt="Desktop View" /></p>

<p>####
 Colormapping</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#Import CategoricalColorMapper from bokeh.models
from bokeh.models import CategoricalColorMapper

# Convert df to a ColumnDataSource: source
source = ColumnDataSource(df)

# Make a CategoricalColorMapper object: color_mapper
color_mapper = CategoricalColorMapper(factors=['Europe', 'Asia', 'US'],
                                      palette=['red', 'green', 'blue'])

# Add a circle glyph to the figure p
p.circle('weight', 'mpg', source=source,
            color=dict(field='origin', transform=color_mapper),
            legend='origin')

# Specify the name of the output file and show the result
output_file('colormap.html')
show(p)


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-3.png" alt="Desktop View" /></p>

<h2 id="layouts-interactions-and-annotations-2">Layouts, Interactions, and Annotations</h2>

<p>###
 Introduction to layouts</p>

<p>####
 Creating rows of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Put p1 and p2 into a horizontal row: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_row.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-2.png" alt="Desktop View" /></p>

<p>####
 Creating columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column from the bokeh.layouts module
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>

<span class="c1"># Create a blank figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a new blank figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Put plots p1 and p2 in a column: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_column.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-2.png" alt="Desktop View" /></p>

<p>####
 Nesting rows and columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column and row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span>

<span class="c1"># Make a column layout that will be used as the second row: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="n">column</span><span class="p">([</span><span class="n">mpg_hp</span><span class="p">,</span> <span class="n">mpg_weight</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Make a row layout that includes the above column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">([</span><span class="n">avg_mpg</span><span class="p">,</span> <span class="n">row2</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'layout_custom.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-1.png" alt="Desktop View" /></p>

<p>###
 Advanced layouts</p>

<p>####
 Creating gridded layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import gridplot from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>

<span class="c1"># Create a list containing plots p1 and p2: row1
</span><span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>

<span class="c1"># Create a list containing plots p3 and p4: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">]</span>

<span class="c1"># Create a gridplot using row1 and row2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'grid.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-1.png" alt="Desktop View" /></p>

<p>####
 Starting tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Panel from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="c1"># Create tab1 from plot p1: tab1
</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Create tab2 from plot p2: tab2
</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Create tab3 from plot p3: tab3
</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Asia'</span><span class="p">)</span>

<span class="c1"># Create tab4 from plot p4: tab4
</span><span class="n">tab4</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Europe'</span><span class="p">)</span>


</code></pre></div></div>

<p>####
 Displaying tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Tabs from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Tabs</span>

<span class="c1"># Create a Tabs layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span><span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span><span class="p">,</span> <span class="n">tab3</span><span class="p">,</span> <span class="n">tab4</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'tabs.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-1.png" alt="Desktop View" /></p>

<p>###
 Linking plots together</p>

<p>####
 Linked axes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Link the x_range of p2 to p1: p2.x_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p2 to p1: p2.y_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Link the x_range of p3 to p1: p3.x_range
</span><span class="n">p3</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p4 to p1: p4.y_range
</span><span class="n">p4</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_range.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-10.png" alt="Desktop View" /></p>

<p>####
 Linked brushing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    Country  Continent female literacy fertility   population
0      Chine       ASI            90.5     1.769  1324.655000
1       Inde       ASI            50.8     2.682  1139.964932
2        USA       NAM              99     2.077   304.060000
3  Indonésie       ASI            88.8     2.132   227.345082
4     Brésil       LAT            90.2     1.827   191.971506

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female literacy (% population)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'population (millions)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Create row layout of figures p1 and p2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_brush.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-9.png" alt="Desktop View" /></p>

<p>###
 Annotations and guides</p>

<p>####
 How to create legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Add the first circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">latin_america</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Add the second circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">africa</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-8.png" alt="Desktop View" /></p>

<p>####
 Positioning and styling legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Assign the legend to the bottom left: p.legend.location
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'bottom_left'</span>

<span class="c1"># Fill the legend background with the color 'lightgray': p.legend.background_fill_color
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s">'lightgray'</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-7.png" alt="Desktop View" /></p>

<p>####
 Adding a hover tooltip</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool object: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span><span class="s">'@Country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool object to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-7.png" alt="Desktop View" /></p>

<h2 id="building-interactive-apps-with-bokeh-2">Building interactive apps with Bokeh</h2>

<p>###
 Introducing the Bokeh Server</p>

<p>####
 Understanding Bokeh apps</p>

<p>The main purpose of the Bokeh server is to synchronize python objects with web applications in a browser, so that rich, interactive data applications can be connected to powerful PyData libraries such as NumPy, SciPy, Pandas, and scikit-learn.</p>

<p>The Bokeh server can automatically keep in sync any property of any Bokeh object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
bokeh serve myapp.py

</code></pre></div></div>

<p>####</p>

<p>Using the current document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Add the plot to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-11.png" alt="Desktop View" /></p>

<p>####
 Add a single slider</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform the necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create a slider: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'my slider'</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a widgetbox layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-10.png" alt="Desktop View" /></p>

<p>####
 Multiple sliders in one document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create first slider: slider1
</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider1'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create second slider: slider2
</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider2'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Add slider1 and slider2 to a widgetbox
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider1</span><span class="p">,</span> <span class="n">slider2</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-9.png" alt="Desktop View" /></p>

<p>###
 Connecting sliders to plots</p>

<p>####
 Adding callbacks to sliders</p>

<p>Callbacks are functions that a user can define, like
 <code class="language-plaintext highlighter-rouge">def callback(attr, old, new)</code>
 , that can be called automatically when some property of a Bokeh object (e.g., the
 <code class="language-plaintext highlighter-rouge">value</code>
 of a
 <code class="language-plaintext highlighter-rouge">Slider</code>
 ) changes.</p>

<p>For the
 <code class="language-plaintext highlighter-rouge">value</code>
 property of
 <code class="language-plaintext highlighter-rouge">Slider</code>
 objects, callbacks are added by passing a callback function to the
 <code class="language-plaintext highlighter-rouge">on_change</code>
 method.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
myslider.on_change('value', callback)

</code></pre></div></div>

<p>####
 How to combine Bokeh models into layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-8.png" alt="Desktop View" /></p>

<p>####
 Learn about widget callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>

    <span class="c1"># Read the current value of the slider: scale
</span>    <span class="n">scale</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Compute the updated y using np.sin(scale/x): new_y
</span>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">scale</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Update source with the new data values
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">new_y</span><span class="p">}</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-8.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-6.png" alt="Desktop View" /></p>

<p>###
 Updating plots from dropdowns</p>

<p>####
 Updating data sources from dropdown callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Select</span>

<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
<span class="p">})</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add circles to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Define a callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If the new Selection is 'female_literacy', update 'y' to female_literacy
</span>    <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="s">'female_literacy'</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
        <span class="p">}</span>
    <span class="c1"># Else, update 'y' to population
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">population</span>
        <span class="p">}</span>

<span class="c1"># Create a dropdown Select widget: select
</span><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"distribution"</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'female_literacy'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'female_literacy'</span><span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of select
</span><span class="n">select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">select</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-6.png" alt="Desktop View" /></p>

<p>####
 Synchronize two dropdowns</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create two dropdown Select widgets: select1, select2
</span><span class="n">select1</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'First'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'A'</span><span class="p">)</span>
<span class="n">select2</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Second'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'1'</span><span class="p">)</span>

<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If select1 is 'A'
</span>    <span class="k">if</span> <span class="n">select1</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">'A'</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['1', '2', '3']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '1'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['100', '200', '300']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'100'</span><span class="p">,</span> <span class="s">'200'</span><span class="p">,</span> <span class="s">'300'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '100'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'100'</span>

<span class="c1"># Attach the callback to the 'value' property of select1
</span><span class="n">select1</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">select1</span><span class="p">,</span> <span class="n">select2</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-5.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-6.png" alt="Desktop View" /></p>

<p>###
 Buttons</p>

<p>####
 Button widgets</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a Button with label 'Update Data'
</span><span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Update Data'</span><span class="p">)</span>

<span class="c1"># Define an update callback with no arguments: update
</span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="c1"># Compute new y values: y
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># Update the ColumnDataSource data dictionary
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">'y'</span><span class="p">:</span><span class="n">y</span><span class="p">}</span>

<span class="c1"># Add the update callback to the button
</span><span class="n">button</span><span class="p">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-4.png" alt="Desktop View" /></p>

<p>####
 Button styles</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import CheckboxGroup, RadioGroup, Toggle from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span><span class="p">,</span> <span class="n">RadioGroup</span><span class="p">,</span> <span class="n">Toggle</span>

<span class="c1"># Add a Toggle: toggle
</span><span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">button_type</span> <span class="o">=</span> <span class="s">'success'</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">'Toggle button'</span><span class="p">)</span>

<span class="c1"># Add a CheckboxGroup: checkbox
</span><span class="n">checkbox</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add a RadioGroup: radio
</span><span class="n">radio</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add widgetbox(toggle, checkbox, radio) to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">radio</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-4.png" alt="Desktop View" /></p>

<h2 id="putting-it-all-together-a-case-study-2">Putting It All Together! A Case Study</h2>

<p>###
 Time to put it all together!</p>

<p>####
 Introducing the project dataset</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
data.info()
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10111 entries, 1964 to 2006
Data columns (total 7 columns):
Country            10111 non-null object
fertility          10100 non-null float64
life               10111 non-null float64
population         10108 non-null float64
child_mortality    9210 non-null float64
gdp                9000 non-null float64
region             10111 non-null object
dtypes: float64(5), object(2)
memory usage: 631.9+ KB


data.head()
          Country  fertility    life  population  child_mortality     gdp  \
Year
1964  Afghanistan      7.671  33.639  10474903.0            339.7  1182.0
1965  Afghanistan      7.671  34.152  10697983.0            334.1  1182.0
1966  Afghanistan      7.671  34.662  10927724.0            328.7  1168.0
1967  Afghanistan      7.671  35.170  11163656.0            323.3  1173.0
1968  Afghanistan      7.671  35.674  11411022.0            318.1  1187.0

          region
Year
1964  South Asia
1965  South Asia
1966  South Asia
1967  South Asia
1968  South Asia

</code></pre></div></div>

<p>####
 Some exploratory plots of the data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'1970'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Life Expectancy (years)'</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Output the file and show the figure
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'gapminder.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-4.png" alt="Desktop View" /></p>

<p>###
 Starting the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-3.png" alt="Desktop View" /></p>

<p>####
 Beginning with just a plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
    <span class="s">'pop'</span>      <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">'region'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Save the minimum and maximum values of the fertility column: xmin, xmax
</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">)</span>

<span class="c1"># Save the minimum and maximum values of the life expectancy column: ymin, ymax
</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">)</span>

<span class="c1"># Create the figure: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Gapminder Data for 1970'</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
              <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

<span class="c1"># Add circle glyphs to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Set the x-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span><span class="s">'Fertility (children per woman)'</span>

<span class="c1"># Set the y-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s">'Life Expectancy (years)'</span>

<span class="c1"># Add the plot to the current document and add a title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>



</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-3.png" alt="Desktop View" /></p>

<p>####
 Enhancing the plot with some shading</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Make a list of the unique values from the region column: regions_list
</span><span class="n">regions_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">region</span><span class="p">.</span><span class="n">unique</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Import CategoricalColorMapper from bokeh.models and the Spectral6 palette from bokeh.palettes
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CategoricalColorMapper</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>

<span class="c1"># Make a color mapper: color_mapper
</span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">CategoricalColorMapper</span><span class="p">(</span><span class="n">factors</span><span class="o">=</span><span class="n">regions_list</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">Spectral6</span><span class="p">)</span>

<span class="c1"># Add the color mapper to the circle glyph
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">'region'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">color_mapper</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="s">'region'</span><span class="p">)</span>

<span class="c1"># Set the legend.location attribute of the plot to 'top_right'
</span><span class="n">plot</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'top_right'</span>

<span class="c1"># Add the plot to the current document and add the title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-2.png" alt="Desktop View" /></p>

<p>####
 Adding a slider to vary the year</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Set the yr name to slider.value and new_data to source.data
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>


<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-2.png" alt="Desktop View" /></p>

<p>###
 Customizing based on user input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Assign the value of the slider: yr
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to: source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Add title to figure: plot.title.text
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-2.png" alt="Desktop View" /></p>

<p>###
 Adding more interactivity to the app</p>

<p>####
 Adding a hover tool</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture17-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Create layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add layout to current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture19-1.png" alt="Desktop View" /></p>

<p>####
 Adding dropdowns to the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture18-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Read the current value off the slider and 2 dropdowns: yr, x, y
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x_select</span><span class="p">.</span><span class="n">value</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y_select</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Label axes of plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">x</span><span class="p">],</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">y</span><span class="p">],</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Set the range of all axes
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

    <span class="c1"># Add title to plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Create a dropdown slider widget: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the x data: x_select
</span><span class="n">x_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'x-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of x_select
</span><span class="n">x_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the y data: y_select
</span><span class="n">y_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'life'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'y-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of y_select
</span><span class="n">y_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">x_select</span><span class="p">,</span> <span class="n">y_select</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="basic-plotting-with-bokeh-3">Basic plotting with Bokeh</h2>

<p>###
 Plotting with glyphs</p>

<p>####
 What are glyphs?</p>

<p>In Bokeh, visual properties of shapes are called glyphs.</p>

<p>Multiple glyphs can be drawn by setting glyph properties to ordered sequences of values.</p>

<p>####
 A simple scatter plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Import output_file and show from bokeh.io
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility</span><span class="p">,</span> <span class="n">female_literacy</span><span class="p">)</span>

<span class="c1"># Call the output_file() function and specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-9.png" alt="Desktop View" /></p>

<p>####
 A scatter plot with different shapes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">)</span>

<span class="c1"># Add an x glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-8.png" alt="Desktop View" /></p>

<p>####
 Customizing your scatter plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a blue circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Add a red circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate_colors.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-7.png" alt="Desktop View" /></p>

<p><a href="http://www.colors.commutercreative.com/grid/">CSS color names</a></p>

<p>###
 Additional glyphs</p>

<p>####
 Lines</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type="datetime": p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">"datetime"</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x axis and price along the y axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="n">price</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-6.png" alt="Desktop View" /></p>

<p>####
 Lines and markers</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type='datetime': p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">'datetime'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x-axis and price along the y-axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>

<span class="c1"># With date on the x-axis and price on the y-axis, add a white circle glyph of size 4
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-6.png" alt="Desktop View" /></p>

<p>####
 Patches</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a list of az_lons, co_lons, nm_lons and ut_lons: x
</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lons</span><span class="p">,</span> <span class="n">co_lons</span><span class="p">,</span> <span class="n">nm_lons</span><span class="p">,</span> <span class="n">ut_lons</span><span class="p">]</span>

<span class="c1"># Create a list of az_lats, co_lats, nm_lats and ut_lats: y
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lats</span><span class="p">,</span> <span class="n">co_lats</span><span class="p">,</span> <span class="n">nm_lats</span><span class="p">,</span> <span class="n">ut_lats</span><span class="p">]</span>

<span class="c1"># Add patches to figure p with line_color=white for x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">patches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">line_color</span> <span class="o">=</span> <span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'four_corners.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-5.png" alt="Desktop View" /></p>

<p>###
 Data formats</p>

<p>####
 Plotting data from NumPy arrays</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import numpy as np
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Create array using np.linspace: x
</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create array using np.cos: y
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Add circles at x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'numpy.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-5.png" alt="Desktop View" /></p>

<p>####
 Plotting data from Pandas DataFrames</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import pandas as pd
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read in the CSV file: df
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'auto.csv'</span><span class="p">)</span>

<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'HP'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'MPG'</span><span class="p">)</span>

<span class="c1"># Plot mpg vs hp by color
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'hp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">'mpg'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'color'</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'auto-df.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-5.png" alt="Desktop View" /></p>

<p>####
 The Bokeh ColumnDataSource</p>

<p>The
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 is a table-like data object that maps string column names to sequences (columns) of data. It is the central and most common data structure in Bokeh.</p>

<p>All columns in a
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 must have the same length.press</p>

<p>####
 The Bokeh ColumnDataSource (continued)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
df.head()
               Name Country   Medal  Time  Year        color
0        Usain Bolt     JAM    GOLD  9.63  2012    goldenrod
1       Yohan Blake     JAM  SILVER  9.75  2012       silver
2     Justin Gatlin     USA  BRONZE  9.79  2012  saddlebrown
3        Usain Bolt     JAM    GOLD  9.69  2008    goldenrod
4  Richard Thompson     TRI  SILVER  9.89  2008       silver

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the ColumnDataSource class from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Create a ColumnDataSource from df: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'color'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'sprint.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-4.png" alt="Desktop View" /></p>

<p>####
 Selection and non-selection glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a figure with the "box_select" tool: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Year'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Time'</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s">'box_select'</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p with the selected and non-selected properties
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">selection_color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">,</span> <span class="n">nonselection_alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'selection_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-3.png" alt="Desktop View" /></p>

<p>####
 Hover glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># import the HoverTool
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Add circle glyphs to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
         <span class="n">fill_color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">hover_fill_color</span><span class="o">=</span><span class="s">'firebrick'</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">hover_line_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'vline'</span><span class="p">)</span>

<span class="c1"># Add the hover tool to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-3.png" alt="Desktop View" /></p>

<p>####
 Colormapping</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#Import CategoricalColorMapper from bokeh.models
from bokeh.models import CategoricalColorMapper

# Convert df to a ColumnDataSource: source
source = ColumnDataSource(df)

# Make a CategoricalColorMapper object: color_mapper
color_mapper = CategoricalColorMapper(factors=['Europe', 'Asia', 'US'],
                                      palette=['red', 'green', 'blue'])

# Add a circle glyph to the figure p
p.circle('weight', 'mpg', source=source,
            color=dict(field='origin', transform=color_mapper),
            legend='origin')

# Specify the name of the output file and show the result
output_file('colormap.html')
show(p)


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-3.png" alt="Desktop View" /></p>

<h2 id="layouts-interactions-and-annotations-3">Layouts, Interactions, and Annotations</h2>

<p>###
 Introduction to layouts</p>

<p>####
 Creating rows of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Put p1 and p2 into a horizontal row: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_row.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-2.png" alt="Desktop View" /></p>

<p>####
 Creating columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column from the bokeh.layouts module
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>

<span class="c1"># Create a blank figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a new blank figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Put plots p1 and p2 in a column: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_column.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-2.png" alt="Desktop View" /></p>

<p>####
 Nesting rows and columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column and row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span>

<span class="c1"># Make a column layout that will be used as the second row: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="n">column</span><span class="p">([</span><span class="n">mpg_hp</span><span class="p">,</span> <span class="n">mpg_weight</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Make a row layout that includes the above column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">([</span><span class="n">avg_mpg</span><span class="p">,</span> <span class="n">row2</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'layout_custom.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-1.png" alt="Desktop View" /></p>

<p>###
 Advanced layouts</p>

<p>####
 Creating gridded layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import gridplot from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>

<span class="c1"># Create a list containing plots p1 and p2: row1
</span><span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>

<span class="c1"># Create a list containing plots p3 and p4: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">]</span>

<span class="c1"># Create a gridplot using row1 and row2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'grid.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-1.png" alt="Desktop View" /></p>

<p>####
 Starting tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Panel from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="c1"># Create tab1 from plot p1: tab1
</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Create tab2 from plot p2: tab2
</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Create tab3 from plot p3: tab3
</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Asia'</span><span class="p">)</span>

<span class="c1"># Create tab4 from plot p4: tab4
</span><span class="n">tab4</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Europe'</span><span class="p">)</span>


</code></pre></div></div>

<p>####
 Displaying tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Tabs from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Tabs</span>

<span class="c1"># Create a Tabs layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span><span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span><span class="p">,</span> <span class="n">tab3</span><span class="p">,</span> <span class="n">tab4</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'tabs.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-1.png" alt="Desktop View" /></p>

<p>###
 Linking plots together</p>

<p>####
 Linked axes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Link the x_range of p2 to p1: p2.x_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p2 to p1: p2.y_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Link the x_range of p3 to p1: p3.x_range
</span><span class="n">p3</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p4 to p1: p4.y_range
</span><span class="n">p4</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_range.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-10.png" alt="Desktop View" /></p>

<p>####
 Linked brushing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    Country  Continent female literacy fertility   population
0      Chine       ASI            90.5     1.769  1324.655000
1       Inde       ASI            50.8     2.682  1139.964932
2        USA       NAM              99     2.077   304.060000
3  Indonésie       ASI            88.8     2.132   227.345082
4     Brésil       LAT            90.2     1.827   191.971506

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female literacy (% population)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'population (millions)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Create row layout of figures p1 and p2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_brush.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-9.png" alt="Desktop View" /></p>

<p>###
 Annotations and guides</p>

<p>####
 How to create legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Add the first circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">latin_america</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Add the second circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">africa</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-8.png" alt="Desktop View" /></p>

<p>####
 Positioning and styling legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Assign the legend to the bottom left: p.legend.location
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'bottom_left'</span>

<span class="c1"># Fill the legend background with the color 'lightgray': p.legend.background_fill_color
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s">'lightgray'</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-7.png" alt="Desktop View" /></p>

<p>####
 Adding a hover tooltip</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool object: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span><span class="s">'@Country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool object to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-7.png" alt="Desktop View" /></p>

<h2 id="building-interactive-apps-with-bokeh-3">Building interactive apps with Bokeh</h2>

<p>###
 Introducing the Bokeh Server</p>

<p>####
 Understanding Bokeh apps</p>

<p>The main purpose of the Bokeh server is to synchronize python objects with web applications in a browser, so that rich, interactive data applications can be connected to powerful PyData libraries such as NumPy, SciPy, Pandas, and scikit-learn.</p>

<p>The Bokeh server can automatically keep in sync any property of any Bokeh object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
bokeh serve myapp.py

</code></pre></div></div>

<p>####</p>

<p>Using the current document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Add the plot to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-11.png" alt="Desktop View" /></p>

<p>####
 Add a single slider</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform the necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create a slider: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'my slider'</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a widgetbox layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-10.png" alt="Desktop View" /></p>

<p>####
 Multiple sliders in one document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create first slider: slider1
</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider1'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create second slider: slider2
</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider2'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Add slider1 and slider2 to a widgetbox
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider1</span><span class="p">,</span> <span class="n">slider2</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-9.png" alt="Desktop View" /></p>

<p>###
 Connecting sliders to plots</p>

<p>####
 Adding callbacks to sliders</p>

<p>Callbacks are functions that a user can define, like
 <code class="language-plaintext highlighter-rouge">def callback(attr, old, new)</code>
 , that can be called automatically when some property of a Bokeh object (e.g., the
 <code class="language-plaintext highlighter-rouge">value</code>
 of a
 <code class="language-plaintext highlighter-rouge">Slider</code>
 ) changes.</p>

<p>For the
 <code class="language-plaintext highlighter-rouge">value</code>
 property of
 <code class="language-plaintext highlighter-rouge">Slider</code>
 objects, callbacks are added by passing a callback function to the
 <code class="language-plaintext highlighter-rouge">on_change</code>
 method.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
myslider.on_change('value', callback)

</code></pre></div></div>

<p>####
 How to combine Bokeh models into layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-8.png" alt="Desktop View" /></p>

<p>####
 Learn about widget callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>

    <span class="c1"># Read the current value of the slider: scale
</span>    <span class="n">scale</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Compute the updated y using np.sin(scale/x): new_y
</span>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">scale</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Update source with the new data values
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">new_y</span><span class="p">}</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-8.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-6.png" alt="Desktop View" /></p>

<p>###
 Updating plots from dropdowns</p>

<p>####
 Updating data sources from dropdown callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Select</span>

<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
<span class="p">})</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add circles to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Define a callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If the new Selection is 'female_literacy', update 'y' to female_literacy
</span>    <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="s">'female_literacy'</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
        <span class="p">}</span>
    <span class="c1"># Else, update 'y' to population
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">population</span>
        <span class="p">}</span>

<span class="c1"># Create a dropdown Select widget: select
</span><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"distribution"</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'female_literacy'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'female_literacy'</span><span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of select
</span><span class="n">select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">select</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-6.png" alt="Desktop View" /></p>

<p>####
 Synchronize two dropdowns</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create two dropdown Select widgets: select1, select2
</span><span class="n">select1</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'First'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'A'</span><span class="p">)</span>
<span class="n">select2</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Second'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'1'</span><span class="p">)</span>

<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If select1 is 'A'
</span>    <span class="k">if</span> <span class="n">select1</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">'A'</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['1', '2', '3']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '1'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['100', '200', '300']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'100'</span><span class="p">,</span> <span class="s">'200'</span><span class="p">,</span> <span class="s">'300'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '100'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'100'</span>

<span class="c1"># Attach the callback to the 'value' property of select1
</span><span class="n">select1</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">select1</span><span class="p">,</span> <span class="n">select2</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-5.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-6.png" alt="Desktop View" /></p>

<p>###
 Buttons</p>

<p>####
 Button widgets</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a Button with label 'Update Data'
</span><span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Update Data'</span><span class="p">)</span>

<span class="c1"># Define an update callback with no arguments: update
</span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="c1"># Compute new y values: y
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># Update the ColumnDataSource data dictionary
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">'y'</span><span class="p">:</span><span class="n">y</span><span class="p">}</span>

<span class="c1"># Add the update callback to the button
</span><span class="n">button</span><span class="p">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-4.png" alt="Desktop View" /></p>

<p>####
 Button styles</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import CheckboxGroup, RadioGroup, Toggle from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span><span class="p">,</span> <span class="n">RadioGroup</span><span class="p">,</span> <span class="n">Toggle</span>

<span class="c1"># Add a Toggle: toggle
</span><span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">button_type</span> <span class="o">=</span> <span class="s">'success'</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">'Toggle button'</span><span class="p">)</span>

<span class="c1"># Add a CheckboxGroup: checkbox
</span><span class="n">checkbox</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add a RadioGroup: radio
</span><span class="n">radio</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add widgetbox(toggle, checkbox, radio) to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">radio</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-4.png" alt="Desktop View" /></p>

<h2 id="putting-it-all-together-a-case-study-3">Putting It All Together! A Case Study</h2>

<p>###
 Time to put it all together!</p>

<p>####
 Introducing the project dataset</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
data.info()
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10111 entries, 1964 to 2006
Data columns (total 7 columns):
Country            10111 non-null object
fertility          10100 non-null float64
life               10111 non-null float64
population         10108 non-null float64
child_mortality    9210 non-null float64
gdp                9000 non-null float64
region             10111 non-null object
dtypes: float64(5), object(2)
memory usage: 631.9+ KB


data.head()
          Country  fertility    life  population  child_mortality     gdp  \
Year
1964  Afghanistan      7.671  33.639  10474903.0            339.7  1182.0
1965  Afghanistan      7.671  34.152  10697983.0            334.1  1182.0
1966  Afghanistan      7.671  34.662  10927724.0            328.7  1168.0
1967  Afghanistan      7.671  35.170  11163656.0            323.3  1173.0
1968  Afghanistan      7.671  35.674  11411022.0            318.1  1187.0

          region
Year
1964  South Asia
1965  South Asia
1966  South Asia
1967  South Asia
1968  South Asia

</code></pre></div></div>

<p>####
 Some exploratory plots of the data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'1970'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Life Expectancy (years)'</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Output the file and show the figure
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'gapminder.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-4.png" alt="Desktop View" /></p>

<p>###
 Starting the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-3.png" alt="Desktop View" /></p>

<p>####
 Beginning with just a plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
    <span class="s">'pop'</span>      <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">'region'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Save the minimum and maximum values of the fertility column: xmin, xmax
</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">)</span>

<span class="c1"># Save the minimum and maximum values of the life expectancy column: ymin, ymax
</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">)</span>

<span class="c1"># Create the figure: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Gapminder Data for 1970'</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
              <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

<span class="c1"># Add circle glyphs to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Set the x-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span><span class="s">'Fertility (children per woman)'</span>

<span class="c1"># Set the y-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s">'Life Expectancy (years)'</span>

<span class="c1"># Add the plot to the current document and add a title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>



</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-3.png" alt="Desktop View" /></p>

<p>####
 Enhancing the plot with some shading</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Make a list of the unique values from the region column: regions_list
</span><span class="n">regions_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">region</span><span class="p">.</span><span class="n">unique</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Import CategoricalColorMapper from bokeh.models and the Spectral6 palette from bokeh.palettes
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CategoricalColorMapper</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>

<span class="c1"># Make a color mapper: color_mapper
</span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">CategoricalColorMapper</span><span class="p">(</span><span class="n">factors</span><span class="o">=</span><span class="n">regions_list</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">Spectral6</span><span class="p">)</span>

<span class="c1"># Add the color mapper to the circle glyph
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">'region'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">color_mapper</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="s">'region'</span><span class="p">)</span>

<span class="c1"># Set the legend.location attribute of the plot to 'top_right'
</span><span class="n">plot</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'top_right'</span>

<span class="c1"># Add the plot to the current document and add the title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-2.png" alt="Desktop View" /></p>

<p>####
 Adding a slider to vary the year</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Set the yr name to slider.value and new_data to source.data
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>


<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-2.png" alt="Desktop View" /></p>

<p>###
 Customizing based on user input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Assign the value of the slider: yr
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to: source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Add title to figure: plot.title.text
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-2.png" alt="Desktop View" /></p>

<p>###
 Adding more interactivity to the app</p>

<p>####
 Adding a hover tool</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture17-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Create layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add layout to current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture19-1.png" alt="Desktop View" /></p>

<p>####
 Adding dropdowns to the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture18-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Read the current value off the slider and 2 dropdowns: yr, x, y
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x_select</span><span class="p">.</span><span class="n">value</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y_select</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Label axes of plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">x</span><span class="p">],</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">y</span><span class="p">],</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Set the range of all axes
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

    <span class="c1"># Add title to plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Create a dropdown slider widget: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the x data: x_select
</span><span class="n">x_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'x-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of x_select
</span><span class="n">x_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the y data: y_select
</span><span class="n">y_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'life'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'y-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of y_select
</span><span class="n">y_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">x_select</span><span class="p">,</span> <span class="n">y_select</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="basic-plotting-with-bokeh-4">Basic plotting with Bokeh</h2>

<p>###
 Plotting with glyphs</p>

<p>####
 What are glyphs?</p>

<p>In Bokeh, visual properties of shapes are called glyphs.</p>

<p>Multiple glyphs can be drawn by setting glyph properties to ordered sequences of values.</p>

<p>####
 A simple scatter plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Import output_file and show from bokeh.io
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility</span><span class="p">,</span> <span class="n">female_literacy</span><span class="p">)</span>

<span class="c1"># Call the output_file() function and specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-9.png" alt="Desktop View" /></p>

<p>####
 A scatter plot with different shapes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">)</span>

<span class="c1"># Add an x glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-8.png" alt="Desktop View" /></p>

<p>####
 Customizing your scatter plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a blue circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_latinamerica</span><span class="p">,</span> <span class="n">female_literacy_latinamerica</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Add a red circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">fertility_africa</span><span class="p">,</span> <span class="n">female_literacy_africa</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Specify the name of the file
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_separate_colors.html'</span><span class="p">)</span>

<span class="c1"># Display the plot
</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-7.png" alt="Desktop View" /></p>

<p><a href="http://www.colors.commutercreative.com/grid/">CSS color names</a></p>

<p>###
 Additional glyphs</p>

<p>####
 Lines</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type="datetime": p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">"datetime"</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x axis and price along the y axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="n">price</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-6.png" alt="Desktop View" /></p>

<p>####
 Lines and markers</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a figure with x_axis_type='datetime': p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s">'datetime'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Date'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'US Dollars'</span><span class="p">)</span>

<span class="c1"># Plot date along the x-axis and price along the y-axis
</span><span class="n">p</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>

<span class="c1"># With date on the x-axis and price on the y-axis, add a white circle glyph of size 4
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'line.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-6.png" alt="Desktop View" /></p>

<p>####
 Patches</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a list of az_lons, co_lons, nm_lons and ut_lons: x
</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lons</span><span class="p">,</span> <span class="n">co_lons</span><span class="p">,</span> <span class="n">nm_lons</span><span class="p">,</span> <span class="n">ut_lons</span><span class="p">]</span>

<span class="c1"># Create a list of az_lats, co_lats, nm_lats and ut_lats: y
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">az_lats</span><span class="p">,</span> <span class="n">co_lats</span><span class="p">,</span> <span class="n">nm_lats</span><span class="p">,</span> <span class="n">ut_lats</span><span class="p">]</span>

<span class="c1"># Add patches to figure p with line_color=white for x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">patches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">line_color</span> <span class="o">=</span> <span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'four_corners.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-5.png" alt="Desktop View" /></p>

<p>###
 Data formats</p>

<p>####
 Plotting data from NumPy arrays</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import numpy as np
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Create array using np.linspace: x
</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create array using np.cos: y
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Add circles at x and y
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'numpy.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-5.png" alt="Desktop View" /></p>

<p>####
 Plotting data from Pandas DataFrames</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import pandas as pd
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Read in the CSV file: df
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'auto.csv'</span><span class="p">)</span>

<span class="c1"># Import figure from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'HP'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'MPG'</span><span class="p">)</span>

<span class="c1"># Plot mpg vs hp by color
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'hp'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">'mpg'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'color'</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'auto-df.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-5.png" alt="Desktop View" /></p>

<p>####
 The Bokeh ColumnDataSource</p>

<p>The
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 is a table-like data object that maps string column names to sequences (columns) of data. It is the central and most common data structure in Bokeh.</p>

<p>All columns in a
 <code class="language-plaintext highlighter-rouge">ColumnDataSource</code>
 must have the same length.press</p>

<p>####
 The Bokeh ColumnDataSource (continued)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
df.head()
               Name Country   Medal  Time  Year        color
0        Usain Bolt     JAM    GOLD  9.63  2012    goldenrod
1       Yohan Blake     JAM  SILVER  9.75  2012       silver
2     Justin Gatlin     USA  BRONZE  9.79  2012  saddlebrown
3        Usain Bolt     JAM    GOLD  9.69  2008    goldenrod
4  Richard Thompson     TRI  SILVER  9.89  2008       silver

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the ColumnDataSource class from bokeh.plotting
</span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Create a ColumnDataSource from df: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'color'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'sprint.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-4.png" alt="Desktop View" /></p>

<p>####
 Selection and non-selection glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a figure with the "box_select" tool: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Year'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Time'</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s">'box_select'</span><span class="p">)</span>

<span class="c1"># Add circle glyphs to the figure p with the selected and non-selected properties
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'Year'</span><span class="p">,</span> <span class="s">'Time'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">selection_color</span> <span class="o">=</span> <span class="s">'red'</span><span class="p">,</span> <span class="n">nonselection_alpha</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'selection_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-3.png" alt="Desktop View" /></p>

<p>####
 Hover glyphs</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># import the HoverTool
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Add circle glyphs to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
         <span class="n">fill_color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">hover_fill_color</span><span class="o">=</span><span class="s">'firebrick'</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
         <span class="n">hover_line_color</span><span class="o">=</span><span class="s">'white'</span><span class="p">)</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'vline'</span><span class="p">)</span>

<span class="c1"># Add the hover tool to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover_glyph.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-3.png" alt="Desktop View" /></p>

<p>####
 Colormapping</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#Import CategoricalColorMapper from bokeh.models
from bokeh.models import CategoricalColorMapper

# Convert df to a ColumnDataSource: source
source = ColumnDataSource(df)

# Make a CategoricalColorMapper object: color_mapper
color_mapper = CategoricalColorMapper(factors=['Europe', 'Asia', 'US'],
                                      palette=['red', 'green', 'blue'])

# Add a circle glyph to the figure p
p.circle('weight', 'mpg', source=source,
            color=dict(field='origin', transform=color_mapper),
            legend='origin')

# Specify the name of the output file and show the result
output_file('colormap.html')
show(p)


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-3.png" alt="Desktop View" /></p>

<h2 id="layouts-interactions-and-annotations-4">Layouts, Interactions, and Annotations</h2>

<p>###
 Introduction to layouts</p>

<p>####
 Creating rows of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Put p1 and p2 into a horizontal row: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_row.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-2.png" alt="Desktop View" /></p>

<p>####
 Creating columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column from the bokeh.layouts module
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>

<span class="c1"># Create a blank figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a new blank figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'population'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female_literacy (% population)'</span><span class="p">)</span>

<span class="c1"># Add circle scatter to the figure p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'population'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Put plots p1 and p2 in a column: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_column.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-2.png" alt="Desktop View" /></p>

<p>####
 Nesting rows and columns of plots</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import column and row from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span>

<span class="c1"># Make a column layout that will be used as the second row: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="n">column</span><span class="p">([</span><span class="n">mpg_hp</span><span class="p">,</span> <span class="n">mpg_weight</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Make a row layout that includes the above column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">([</span><span class="n">avg_mpg</span><span class="p">,</span> <span class="n">row2</span><span class="p">],</span> <span class="n">sizing_mode</span><span class="o">=</span><span class="s">'scale_width'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'layout_custom.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-1.png" alt="Desktop View" /></p>

<p>###
 Advanced layouts</p>

<p>####
 Creating gridded layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import gridplot from bokeh.layouts
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>

<span class="c1"># Create a list containing plots p1 and p2: row1
</span><span class="n">row1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span>

<span class="c1"># Create a list containing plots p3 and p4: row2
</span><span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">]</span>

<span class="c1"># Create a gridplot using row1 and row2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([</span><span class="n">row1</span><span class="p">,</span> <span class="n">row2</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'grid.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-1.png" alt="Desktop View" /></p>

<p>####
 Starting tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Panel from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span>

<span class="c1"># Create tab1 from plot p1: tab1
</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Create tab2 from plot p2: tab2
</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Create tab3 from plot p3: tab3
</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Asia'</span><span class="p">)</span>

<span class="c1"># Create tab4 from plot p4: tab4
</span><span class="n">tab4</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Europe'</span><span class="p">)</span>


</code></pre></div></div>

<p>####
 Displaying tabbed layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import Tabs from bokeh.models.widgets
</span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Tabs</span>

<span class="c1"># Create a Tabs layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span><span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span><span class="p">,</span> <span class="n">tab3</span><span class="p">,</span> <span class="n">tab4</span><span class="p">])</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'tabs.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-1.png" alt="Desktop View" /></p>

<p>###
 Linking plots together</p>

<p>####
 Linked axes</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Link the x_range of p2 to p1: p2.x_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p2 to p1: p2.y_range
</span><span class="n">p2</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Link the x_range of p3 to p1: p3.x_range
</span><span class="n">p3</span><span class="p">.</span><span class="n">x_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">x_range</span>

<span class="c1"># Link the y_range of p4 to p1: p4.y_range
</span><span class="n">p4</span><span class="p">.</span><span class="n">y_range</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="n">y_range</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_range.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-10.png" alt="Desktop View" /></p>

<p>####
 Linked brushing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    Country  Continent female literacy fertility   population
0      Chine       ASI            90.5     1.769  1324.655000
1       Inde       ASI            50.8     2.682  1139.964932
2        USA       NAM              99     2.077   304.060000
3  Indonésie       ASI            88.8     2.132   227.345082
4     Brésil       LAT            90.2     1.827   191.971506

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Create the first figure: p1
</span><span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'female literacy (% population)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p1
</span><span class="n">p1</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create the second figure: p2
</span><span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_label</span><span class="o">=</span><span class="s">'fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'population (millions)'</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="s">'box_select,lasso_select'</span><span class="p">)</span>

<span class="c1"># Add a circle glyph to p2
</span><span class="n">p2</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>


<span class="c1"># Create row layout of figures p1 and p2: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'linked_brush.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-9.png" alt="Desktop View" /></p>

<p>###
 Annotations and guides</p>

<p>####
 How to create legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Add the first circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">latin_america</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Latin America'</span><span class="p">)</span>

<span class="c1"># Add the second circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'female_literacy'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">africa</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">'Africa'</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-8.png" alt="Desktop View" /></p>

<p>####
 Positioning and styling legends</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Assign the legend to the bottom left: p.legend.location
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'bottom_left'</span>

<span class="c1"># Fill the legend background with the color 'lightgray': p.legend.background_fill_color
</span><span class="n">p</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s">'lightgray'</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'fert_lit_groups.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-7.png" alt="Desktop View" /></p>

<p>####
 Adding a hover tooltip</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool object: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span><span class="s">'@Country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool object to figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Specify the name of the output_file and show the result
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'hover.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-7.png" alt="Desktop View" /></p>

<h2 id="building-interactive-apps-with-bokeh-4">Building interactive apps with Bokeh</h2>

<p>###
 Introducing the Bokeh Server</p>

<p>####
 Understanding Bokeh apps</p>

<p>The main purpose of the Bokeh server is to synchronize python objects with web applications in a browser, so that rich, interactive data applications can be connected to powerful PyData libraries such as NumPy, SciPy, Pandas, and scikit-learn.</p>

<p>The Bokeh server can automatically keep in sync any property of any Bokeh object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
bokeh serve myapp.py

</code></pre></div></div>

<p>####</p>

<p>Using the current document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>

<span class="c1"># Add the plot to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture-11.png" alt="Desktop View" /></p>

<p>####
 Add a single slider</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform the necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create a slider: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'my slider'</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a widgetbox layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture1-10.png" alt="Desktop View" /></p>

<p>####
 Multiple sliders in one document</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Create first slider: slider1
</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider1'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create second slider: slider2
</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'slider2'</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># Add slider1 and slider2 to a widgetbox
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">slider1</span><span class="p">,</span> <span class="n">slider2</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture2-9.png" alt="Desktop View" /></p>

<p>###
 Connecting sliders to plots</p>

<p>####
 Adding callbacks to sliders</p>

<p>Callbacks are functions that a user can define, like
 <code class="language-plaintext highlighter-rouge">def callback(attr, old, new)</code>
 , that can be called automatically when some property of a Bokeh object (e.g., the
 <code class="language-plaintext highlighter-rouge">value</code>
 of a
 <code class="language-plaintext highlighter-rouge">Slider</code>
 ) changes.</p>

<p>For the
 <code class="language-plaintext highlighter-rouge">value</code>
 property of
 <code class="language-plaintext highlighter-rouge">Slider</code>
 objects, callbacks are added by passing a callback function to the
 <code class="language-plaintext highlighter-rouge">on_change</code>
 method.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
myslider.on_change('value', callback)

</code></pre></div></div>

<p>####
 How to combine Bokeh models into layouts</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>

<span class="c1"># Add a line to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Create a column layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add the layout to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture3-8.png" alt="Desktop View" /></p>

<p>####
 Learn about widget callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>

    <span class="c1"># Read the current value of the slider: scale
</span>    <span class="n">scale</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Compute the updated y using np.sin(scale/x): new_y
</span>    <span class="n">new_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">scale</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># Update source with the new data values
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="n">new_y</span><span class="p">}</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture4-8.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture5-6.png" alt="Desktop View" /></p>

<p>###
 Updating plots from dropdowns</p>

<p>####
 Updating data sources from dropdown callbacks</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Select</span>

<span class="c1"># Create ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
<span class="p">})</span>

<span class="c1"># Create a new plot: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>

<span class="c1"># Add circles to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Define a callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If the new Selection is 'female_literacy', update 'y' to female_literacy
</span>    <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="s">'female_literacy'</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">female_literacy</span>
        <span class="p">}</span>
    <span class="c1"># Else, update 'y' to population
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'x'</span> <span class="p">:</span> <span class="n">fertility</span><span class="p">,</span>
            <span class="s">'y'</span> <span class="p">:</span> <span class="n">population</span>
        <span class="p">}</span>

<span class="c1"># Create a dropdown Select widget: select
</span><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"distribution"</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'female_literacy'</span><span class="p">,</span> <span class="s">'population'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'female_literacy'</span><span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of select
</span><span class="n">select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">select</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture6-6.png" alt="Desktop View" /></p>

<p>####
 Synchronize two dropdowns</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create two dropdown Select widgets: select1, select2
</span><span class="n">select1</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'First'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'B'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'A'</span><span class="p">)</span>
<span class="n">select2</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Second'</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s">'1'</span><span class="p">)</span>

<span class="c1"># Define a callback function: callback
</span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># If select1 is 'A'
</span>    <span class="k">if</span> <span class="n">select1</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">'A'</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['1', '2', '3']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '1'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Set select2 options to ['100', '200', '300']
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s">'100'</span><span class="p">,</span> <span class="s">'200'</span><span class="p">,</span> <span class="s">'300'</span><span class="p">]</span>

        <span class="c1"># Set select2 value to '100'
</span>        <span class="n">select2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">'100'</span>

<span class="c1"># Attach the callback to the 'value' property of select1
</span><span class="n">select1</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">widgetbox</span><span class="p">(</span><span class="n">select1</span><span class="p">,</span> <span class="n">select2</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture8-5.png" alt="Desktop View" /></p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture7-6.png" alt="Desktop View" /></p>

<p>###
 Buttons</p>

<p>####
 Button widgets</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Create a Button with label 'Update Data'
</span><span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Update Data'</span><span class="p">)</span>

<span class="c1"># Define an update callback with no arguments: update
</span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>

    <span class="c1"># Compute new y values: y
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="c1"># Update the ColumnDataSource data dictionary
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'x'</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">'y'</span><span class="p">:</span><span class="n">y</span><span class="p">}</span>

<span class="c1"># Add the update callback to the button
</span><span class="n">button</span><span class="p">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture9-4.png" alt="Desktop View" /></p>

<p>####
 Button styles</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import CheckboxGroup, RadioGroup, Toggle from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span><span class="p">,</span> <span class="n">RadioGroup</span><span class="p">,</span> <span class="n">Toggle</span>

<span class="c1"># Add a Toggle: toggle
</span><span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">button_type</span> <span class="o">=</span> <span class="s">'success'</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">'Toggle button'</span><span class="p">)</span>

<span class="c1"># Add a CheckboxGroup: checkbox
</span><span class="n">checkbox</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add a RadioGroup: radio
</span><span class="n">radio</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">'Option 1'</span><span class="p">,</span> <span class="s">'Option 2'</span><span class="p">,</span> <span class="s">'Option 3'</span><span class="p">])</span>

<span class="c1"># Add widgetbox(toggle, checkbox, radio) to the current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">,</span> <span class="n">radio</span><span class="p">))</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture10-4.png" alt="Desktop View" /></p>

<h2 id="putting-it-all-together-a-case-study-4">Putting It All Together! A Case Study</h2>

<p>###
 Time to put it all together!</p>

<p>####
 Introducing the project dataset</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
data.info()
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10111 entries, 1964 to 2006
Data columns (total 7 columns):
Country            10111 non-null object
fertility          10100 non-null float64
life               10111 non-null float64
population         10108 non-null float64
child_mortality    9210 non-null float64
gdp                9000 non-null float64
region             10111 non-null object
dtypes: float64(5), object(2)
memory usage: 631.9+ KB


data.head()
          Country  fertility    life  population  child_mortality     gdp  \
Year
1964  Afghanistan      7.671  33.639  10474903.0            339.7  1182.0
1965  Afghanistan      7.671  34.152  10697983.0            334.1  1182.0
1966  Afghanistan      7.671  34.662  10927724.0            328.7  1168.0
1967  Afghanistan      7.671  35.170  11163656.0            323.3  1173.0
1968  Afghanistan      7.671  35.674  11411022.0            318.1  1187.0

          region
Year
1964  South Asia
1965  South Asia
1966  South Asia
1967  South Asia
1968  South Asia

</code></pre></div></div>

<p>####
 Some exploratory plots of the data</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Perform necessary imports
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">ColumnDataSource</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Create the figure: p
</span><span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'1970'</span><span class="p">,</span> <span class="n">x_axis_label</span><span class="o">=</span><span class="s">'Fertility (children per woman)'</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">'Life Expectancy (years)'</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add a circle glyph to the figure p
</span><span class="n">p</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Output the file and show the figure
</span><span class="n">output_file</span><span class="p">(</span><span class="s">'gapminder.html'</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture11-4.png" alt="Desktop View" /></p>

<p>###
 Starting the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture12-3.png" alt="Desktop View" /></p>

<p>####
 Beginning with just a plot</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">curdoc</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="c1"># Make the ColumnDataSource: source
</span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
    <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
    <span class="s">'country'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
    <span class="s">'pop'</span>      <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">'region'</span>      <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1970</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
<span class="p">})</span>

<span class="c1"># Save the minimum and maximum values of the fertility column: xmin, xmax
</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">fertility</span><span class="p">)</span>

<span class="c1"># Save the minimum and maximum values of the life expectancy column: ymin, ymax
</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">life</span><span class="p">)</span>

<span class="c1"># Create the figure: plot
</span><span class="n">plot</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Gapminder Data for 1970'</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
              <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

<span class="c1"># Add circle glyphs to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># Set the x-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span><span class="s">'Fertility (children per woman)'</span>

<span class="c1"># Set the y-axis label
</span><span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s">'Life Expectancy (years)'</span>

<span class="c1"># Add the plot to the current document and add a title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>



</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture13-3.png" alt="Desktop View" /></p>

<p>####
 Enhancing the plot with some shading</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Make a list of the unique values from the region column: regions_list
</span><span class="n">regions_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">region</span><span class="p">.</span><span class="n">unique</span><span class="p">().</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Import CategoricalColorMapper from bokeh.models and the Spectral6 palette from bokeh.palettes
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CategoricalColorMapper</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>

<span class="c1"># Make a color mapper: color_mapper
</span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">CategoricalColorMapper</span><span class="p">(</span><span class="n">factors</span><span class="o">=</span><span class="n">regions_list</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">Spectral6</span><span class="p">)</span>

<span class="c1"># Add the color mapper to the circle glyph
</span><span class="n">plot</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">'region'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">color_mapper</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="s">'region'</span><span class="p">)</span>

<span class="c1"># Set the legend.location attribute of the plot to 'top_right'
</span><span class="n">plot</span><span class="p">.</span><span class="n">legend</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="s">'top_right'</span>

<span class="c1"># Add the plot to the current document and add the title
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Gapminder'</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture14-2.png" alt="Desktop View" /></p>

<p>####
 Adding a slider to vary the year</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import the necessary modules
</span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Set the yr name to slider.value and new_data to source.data
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>


<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture15-2.png" alt="Desktop View" /></p>

<p>###
 Customizing based on user input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback function: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Assign the value of the slider: yr
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">fertility</span><span class="p">,</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">life</span><span class="p">,</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to: source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Add title to figure: plot.title.text
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Make a slider object: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">2010</span><span class="p">,</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">1970</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Make a row layout of widgetbox(slider) and plot and add it to the current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture16-2.png" alt="Desktop View" /></p>

<p>###
 Adding more interactivity to the app</p>

<p>####
 Adding a hover tool</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture17-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Import HoverTool from bokeh.models
</span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>

<span class="c1"># Create a HoverTool: hover
</span><span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s">'Country'</span><span class="p">,</span> <span class="s">'@country'</span><span class="p">)])</span>

<span class="c1"># Add the HoverTool to the plot
</span><span class="n">plot</span><span class="p">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">hover</span><span class="p">)</span>

<span class="c1"># Create layout: layout
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>

<span class="c1"># Add layout to current document
</span><span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture19-1.png" alt="Desktop View" /></p>

<p>####
 Adding dropdowns to the app</p>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture18-1.png" alt="Desktop View" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Define the callback: update_plot
</span><span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="c1"># Read the current value off the slider and 2 dropdowns: yr, x, y
</span>    <span class="n">yr</span> <span class="o">=</span> <span class="n">slider</span><span class="p">.</span><span class="n">value</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x_select</span><span class="p">.</span><span class="n">value</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y_select</span><span class="p">.</span><span class="n">value</span>
    <span class="c1"># Label axes of plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">x</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c1"># Set new_data
</span>    <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'x'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">x</span><span class="p">],</span>
        <span class="s">'y'</span>       <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">][</span><span class="n">y</span><span class="p">],</span>
        <span class="s">'country'</span> <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">Country</span><span class="p">,</span>
        <span class="s">'pop'</span>     <span class="p">:</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">population</span> <span class="o">/</span> <span class="mi">20000000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">'region'</span>  <span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">yr</span><span class="p">].</span><span class="n">region</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Assign new_data to source.data
</span>    <span class="n">source</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>

    <span class="c1"># Set the range of all axes
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">x_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
    <span class="n">plot</span><span class="p">.</span><span class="n">y_range</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>

    <span class="c1"># Add title to plot
</span>    <span class="n">plot</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">'Gapminder data for %d'</span> <span class="o">%</span> <span class="n">yr</span>

<span class="c1"># Create a dropdown slider widget: slider
</span><span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1970</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">'Year'</span><span class="p">)</span>

<span class="c1"># Attach the callback to the 'value' property of slider
</span><span class="n">slider</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the x data: x_select
</span><span class="n">x_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'fertility'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'x-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of x_select
</span><span class="n">x_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create a dropdown Select widget for the y data: y_select
</span><span class="n">y_select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s">'fertility'</span><span class="p">,</span> <span class="s">'life'</span><span class="p">,</span> <span class="s">'child_mortality'</span><span class="p">,</span> <span class="s">'gdp'</span><span class="p">],</span>
    <span class="n">value</span><span class="o">=</span><span class="s">'life'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s">'y-axis data'</span>
<span class="p">)</span>

<span class="c1"># Attach the update_plot callback to the 'value' property of y_select
</span><span class="n">y_select</span><span class="p">.</span><span class="n">on_change</span><span class="p">(</span><span class="s">'value'</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Create layout and add to current document
</span><span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">x_select</span><span class="p">,</span> <span class="n">y_select</span><span class="p">),</span> <span class="n">plot</span><span class="p">)</span>
<span class="n">curdoc</span><span class="p">().</span><span class="n">add_root</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/blog/assets/datacamp/interactive-data-visualization-with-bokeh/capture20-1.png" alt="Desktop View" /></p>

